[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "LCA-Work Visa Trends",
    "section": "",
    "text": "1 Introduction",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "LCA-Work Visa Trends",
    "section": "",
    "text": "#Data",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>data.html</span>"
    ]
  },
  {
    "objectID": "freq_plot.html",
    "href": "freq_plot.html",
    "title": "3¬† A tibble: 6 √ó 2",
    "section": "",
    "text": "Code\nlibrary(readxl)\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(ggplot2)\nlibrary(maps)\n\n\nWarning: package 'maps' was built under R version 4.5.2\n\n\n\n\nCode\n#reading the data\nlca &lt;- read_excel(\"LCA_Disclosure_Data_FY2024_Q1.xlsx\")\n\nnames(lca)\n\n\n [1] \"CASE_NUMBER\"                    \"CASE_STATUS\"                   \n [3] \"RECEIVED_DATE\"                  \"DECISION_DATE\"                 \n [5] \"ORIGINAL_CERT_DATE\"             \"VISA_CLASS\"                    \n [7] \"JOB_TITLE\"                      \"SOC_CODE\"                      \n [9] \"SOC_TITLE\"                      \"FULL_TIME_POSITION\"            \n[11] \"BEGIN_DATE\"                     \"END_DATE\"                      \n[13] \"TOTAL_WORKER_POSITIONS\"         \"NEW_EMPLOYMENT\"                \n[15] \"CONTINUED_EMPLOYMENT\"           \"CHANGE_PREVIOUS_EMPLOYMENT\"    \n[17] \"NEW_CONCURRENT_EMPLOYMENT\"      \"CHANGE_EMPLOYER\"               \n[19] \"AMENDED_PETITION\"               \"EMPLOYER_NAME\"                 \n[21] \"TRADE_NAME_DBA\"                 \"EMPLOYER_ADDRESS1\"             \n[23] \"EMPLOYER_ADDRESS2\"              \"EMPLOYER_CITY\"                 \n[25] \"EMPLOYER_STATE\"                 \"EMPLOYER_POSTAL_CODE\"          \n[27] \"EMPLOYER_COUNTRY\"               \"EMPLOYER_PROVINCE\"             \n[29] \"EMPLOYER_PHONE\"                 \"EMPLOYER_PHONE_EXT\"            \n[31] \"EMPLOYER_FEIN\"                  \"NAICS_CODE\"                    \n[33] \"EMPLOYER_POC_LAST_NAME\"         \"EMPLOYER_POC_FIRST_NAME\"       \n[35] \"EMPLOYER_POC_MIDDLE_NAME\"       \"EMPLOYER_POC_JOB_TITLE\"        \n[37] \"EMPLOYER_POC_ADDRESS1\"          \"EMPLOYER_POC_ADDRESS2\"         \n[39] \"EMPLOYER_POC_CITY\"              \"EMPLOYER_POC_STATE\"            \n[41] \"EMPLOYER_POC_POSTAL_CODE\"       \"EMPLOYER_POC_COUNTRY\"          \n[43] \"EMPLOYER_POC_PROVINCE\"          \"EMPLOYER_POC_PHONE\"            \n[45] \"EMPLOYER_POC_PHONE_EXT\"         \"EMPLOYER_POC_EMAIL\"            \n[47] \"AGENT_REPRESENTING_EMPLOYER\"    \"AGENT_ATTORNEY_LAST_NAME\"      \n[49] \"AGENT_ATTORNEY_FIRST_NAME\"      \"AGENT_ATTORNEY_MIDDLE_NAME\"    \n[51] \"AGENT_ATTORNEY_ADDRESS1\"        \"AGENT_ATTORNEY_ADDRESS2\"       \n[53] \"AGENT_ATTORNEY_CITY\"            \"AGENT_ATTORNEY_STATE\"          \n[55] \"AGENT_ATTORNEY_POSTAL_CODE\"     \"AGENT_ATTORNEY_COUNTRY\"        \n[57] \"AGENT_ATTORNEY_PROVINCE\"        \"AGENT_ATTORNEY_PHONE\"          \n[59] \"AGENT_ATTORNEY_PHONE_EXT\"       \"AGENT_ATTORNEY_EMAIL_ADDRESS\"  \n[61] \"LAWFIRM_NAME_BUSINESS_NAME\"     \"STATE_OF_HIGHEST_COURT\"        \n[63] \"NAME_OF_HIGHEST_STATE_COURT\"    \"WORKSITE_WORKERS\"              \n[65] \"SECONDARY_ENTITY\"               \"SECONDARY_ENTITY_BUSINESS_NAME\"\n[67] \"WORKSITE_ADDRESS1\"              \"WORKSITE_ADDRESS2\"             \n[69] \"WORKSITE_CITY\"                  \"WORKSITE_COUNTY\"               \n[71] \"WORKSITE_STATE\"                 \"WORKSITE_POSTAL_CODE\"          \n[73] \"WAGE_RATE_OF_PAY_FROM\"          \"WAGE_RATE_OF_PAY_TO\"           \n[75] \"WAGE_UNIT_OF_PAY\"               \"PREVAILING_WAGE\"               \n[77] \"PW_UNIT_OF_PAY\"                 \"PW_TRACKING_NUMBER\"            \n[79] \"PW_WAGE_LEVEL\"                  \"PW_OES_YEAR\"                   \n[81] \"PW_OTHER_SOURCE\"                \"PW_OTHER_YEAR\"                 \n[83] \"PW_SURVEY_PUBLISHER\"            \"PW_SURVEY_NAME\"                \n[85] \"TOTAL_WORKSITE_LOCATIONS\"       \"AGREE_TO_LC_STATEMENT\"         \n[87] \"H_1B_DEPENDENT\"                 \"WILLFUL_VIOLATOR\"              \n[89] \"SUPPORT_H1B\"                    \"STATUTORY_BASIS\"               \n[91] \"APPENDIX_A_ATTACHED\"            \"PUBLIC_DISCLOSURE\"             \n[93] \"PREPARER_LAST_NAME\"             \"PREPARER_FIRST_NAME\"           \n[95] \"PREPARER_MIDDLE_INITIAL\"        \"PREPARER_BUSINESS_NAME\"        \n[97] \"PREPARER_EMAIL\"                \n\n\n\n\nCode\n#Frequency of SOCs\nsoc_freq &lt;- lca |&gt;\n  filter(!is.na(SOC_TITLE), SOC_TITLE != \"\") |&gt;\n  count(SOC_TITLE, sort = TRUE)\n\nhead(soc_freq)\n\n\n  SOC_TITLE                                           n\n  &lt;chr&gt;                                           &lt;int&gt;\n1 Software Developers                             32756\n2 Computer Systems Engineers/Architects            5562\n3 Information Technology Project Managers          3706\n4 Computer Systems Analysts                        3360\n5 Software Quality Assurance Analysts and Testers  3135\n6 Computer and Information Systems Managers        2531\n\n\n\n\nCode\n#SOC vs Freq\nsoc_freq|&gt;\n  slice_max(n, n = 20) |&gt;\n  ggplot(aes(x = reorder(SOC_TITLE, n), y = n)) +\n  geom_col() +\n  coord_flip() +\n  labs(\n    title = \"Frequency of SOC in LCA Data\",\n    x = \"SOC\",\n    y = \"Count\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\nsoc_top20 &lt;- soc_freq |&gt;\n  slice_max(n, n = 20)\n\nsoc_table_top20 &lt;- soc_top20 |&gt;\n  left_join(\n    lca |&gt;\n      distinct(SOC_TITLE, SOC_CODE),\n    by = \"SOC_TITLE\"\n  ) |&gt;\n  select(SOC_CODE, SOC_TITLE, n) |&gt;\n  arrange(desc(n))\n\nsoc_table_top20\n\n\n# A tibble: 50 √ó 3\n   SOC_CODE   SOC_TITLE                                   n\n   &lt;chr&gt;      &lt;chr&gt;                                   &lt;int&gt;\n 1 15-1252.00 Software Developers                     32756\n 2 15-1252    Software Developers                     32756\n 3 15-1133.00 Software Developers                     32756\n 4 15-1299.08 Computer Systems Engineers/Architects    5562\n 5 15-1199.02 Computer Systems Engineers/Architects    5562\n 6 15-1299.09 Information Technology Project Managers  3706\n 7 15-1199.09 Information Technology Project Managers  3706\n 8 15-1211.00 Computer Systems Analysts                3360\n 9 15-1211    Computer Systems Analysts                3360\n10 15-1121.00 Computer Systems Analysts                3360\n# ‚Ñπ 40 more rows\n\n\n\n\nCode\n# 1. Filter only SOC = \"Software Developers\"\nsoftware_dev &lt;- lca %&gt;%\n  filter(SOC_TITLE == \"Software Developers\")\n\n# 2. Get frequency of job titles within this SOC\njob_freq &lt;- software_dev %&gt;%\n  filter(!is.na(JOB_TITLE), JOB_TITLE != \"\") %&gt;%\n  count(JOB_TITLE, sort = TRUE)\n\n# Optional: peek at top titles\nhead(job_freq, 10)\n\n\n# A tibble: 10 √ó 2\n   JOB_TITLE                            n\n   &lt;chr&gt;                            &lt;int&gt;\n 1 Software Engineer                 4750\n 2 Software Developer                3620\n 3 Senior Software Engineer          1273\n 4 SOFTWARE DEVELOPER                1025\n 5 Software Development Engineer II   666\n 6 SOFTWARE ENGINEER                  598\n 7 Staff Software Engineer            292\n 8 Senior Software Developer          279\n 9 Software Development Engineer      251\n10 Java Developer                     237\n\n\nCode\n# 3. Bar chart of top 20 job titles in Software Developers SOC\njob_freq |&gt;\n  slice_max(n, n = 20) |&gt;   \n  ggplot(aes(x = reorder(JOB_TITLE, n), y = n)) +\n  geom_col() +\n  coord_flip() +\n  labs(\n    title = \"Top Job Titles within SOC: Software Developers\",\n    x = \"Job Title\",\n    y = \"Count\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\n# Unique SOC code‚Äìtitle combinations\nsoc_table &lt;- lca |&gt;\n  select(SOC_CODE, SOC_TITLE) |&gt;\n  distinct() |&gt;\n  arrange(SOC_CODE)\n\n# View in console\nsoc_table\n\n\n# A tibble: 794 √ó 2\n   SOC_CODE   SOC_TITLE                          \n   &lt;chr&gt;      &lt;chr&gt;                              \n 1 11-1011    Chief Executives                   \n 2 11-1011.00 Chief Executives                   \n 3 11-1011.03 Chief Sustainability Officers      \n 4 11-1021    General and Operations Managers    \n 5 11-1021.00 General and Operations Managers    \n 6 11-2011.00 Advertising and Promotions Managers\n 7 11-2021    Marketing Managers                 \n 8 11-2021    MARKETING MANAGERS                 \n 9 11-2021    Marketing Manager                  \n10 11-2021.00 Marketing Managers                 \n# ‚Ñπ 784 more rows\n\n\n\n\nCode\n#State vs SOC\nstate_counts &lt;- lca |&gt;\n  filter(CASE_STATUS == \"Certified\",\n         !is.na(WORKSITE_STATE),\n         WORKSITE_STATE != \"\") |&gt;\n  count(WORKSITE_STATE, name = \"n\")\n\nhead(state_counts)\n\n\n# A tibble: 6 √ó 2\n  WORKSITE_STATE     n\n  &lt;chr&gt;          &lt;int&gt;\n1 AK               100\n2 AL               221\n3 AR               431\n4 AZ              1486\n5 CA             15832\n6 CO               923\n\n\n\n\nCode\n# Lookup table: 2-letter abbrev -&gt; full state name (lowercase for map_data)\nstate_lookup &lt;- data.frame(\n  WORKSITE_STATE = state.abb,\n  region = tolower(state.name),\n  stringsAsFactors = FALSE\n)\n\nstate_counts_map &lt;- state_counts |&gt;\n  inner_join(state_lookup, by = \"WORKSITE_STATE\")\n\nusa_map &lt;- map_data(\"state\")\n\nplot_data &lt;- usa_map |&gt;\n  left_join(state_counts_map, by = \"region\")\n  \n\n\nstate_labels &lt;- plot_data|&gt;\n  group_by(region) |&gt;\n  summarise(\n    long = mean(range(long)),  \n    lat  = mean(range(lat))\n  ) |&gt;\n  left_join(state_lookup, by = \"region\")   \n  \n\n\n#Choropleth  \nggplot() +\n \n  geom_polygon(\n    data = plot_data,\n    aes(x = long, y = lat, group = group, fill = n),\n    color = \"white\",\n    linewidth = 0.2\n  ) +\n  \n  geom_text(\n    data = state_labels,\n    aes(x = long, y = lat, label = WORKSITE_STATE),\n    color = \"white\",\n    size  = 2\n  ) +\n  coord_fixed(1.3) +\n  labs(\n    title = \"Number of Certified LCA Cases by State\",\n    fill  = \"Visa Count\",\n    x = NULL,\n    y = NULL\n  ) +\n   scale_fill_gradient(\n    low  = \"#c6e5ff\",   \n    high = \"#003366\",   \n    trans = \"sqrt\"      \n  ) +\n  theme_minimal() +\n  theme(\n    axis.text  = element_blank(),\n    axis.ticks = element_blank()\n  )\n\n\nWarning: Removed 1 row containing missing values or values outside the scale range\n(`geom_text()`).\n\n\n\n\n\n\n\n\n\n\n\nCode\n#CASE STATUS Freq\ncase_freq &lt;- lca |&gt;\n  filter(!is.na(CASE_STATUS), CASE_STATUS != \"\") |&gt;\n  count(CASE_STATUS, sort = TRUE)\n\ncase_freq\n\n\n# A tibble: 4 √ó 2\n  CASE_STATUS               n\n  &lt;chr&gt;                 &lt;int&gt;\n1 Certified             87417\n2 Certified - Withdrawn  9724\n3 Withdrawn              1652\n4 Denied                  899\n\n\nCode\nggplot(case_freq, aes(x = reorder(CASE_STATUS, n), y = n)) +\n  geom_col() +\n  coord_flip() +\n  labs(\n    title = \"Frequency of CASE_STATUS in LCA Data\",\n    x = \"Case Status\",\n    y = \"Count\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\nmissing_by_col &lt;- data.frame(\n  column = names(lca),\n  n_missing = colSums(is.na(lca))\n)\n\nmissing_by_col |&gt;\n  dplyr::filter(n_missing &gt; 0)\n\n\n                                                       column n_missing\nORIGINAL_CERT_DATE                         ORIGINAL_CERT_DATE     89968\nTRADE_NAME_DBA                                 TRADE_NAME_DBA     90043\nEMPLOYER_ADDRESS2                           EMPLOYER_ADDRESS2     50186\nEMPLOYER_STATE                                 EMPLOYER_STATE        22\nEMPLOYER_PROVINCE                           EMPLOYER_PROVINCE     91182\nEMPLOYER_PHONE_EXT                         EMPLOYER_PHONE_EXT     93114\nEMPLOYER_POC_FIRST_NAME               EMPLOYER_POC_FIRST_NAME         2\nEMPLOYER_POC_MIDDLE_NAME             EMPLOYER_POC_MIDDLE_NAME     74450\nEMPLOYER_POC_ADDRESS2                   EMPLOYER_POC_ADDRESS2     49593\nEMPLOYER_POC_STATE                         EMPLOYER_POC_STATE       135\nEMPLOYER_POC_PROVINCE                   EMPLOYER_POC_PROVINCE     98947\nEMPLOYER_POC_PHONE_EXT                 EMPLOYER_POC_PHONE_EXT     93668\nAGENT_ATTORNEY_LAST_NAME             AGENT_ATTORNEY_LAST_NAME     29241\nAGENT_ATTORNEY_FIRST_NAME           AGENT_ATTORNEY_FIRST_NAME     29241\nAGENT_ATTORNEY_MIDDLE_NAME         AGENT_ATTORNEY_MIDDLE_NAME     61837\nAGENT_ATTORNEY_ADDRESS1               AGENT_ATTORNEY_ADDRESS1     29241\nAGENT_ATTORNEY_ADDRESS2               AGENT_ATTORNEY_ADDRESS2     42430\nAGENT_ATTORNEY_CITY                       AGENT_ATTORNEY_CITY     29241\nAGENT_ATTORNEY_STATE                     AGENT_ATTORNEY_STATE     33240\nAGENT_ATTORNEY_POSTAL_CODE         AGENT_ATTORNEY_POSTAL_CODE     29241\nAGENT_ATTORNEY_COUNTRY                 AGENT_ATTORNEY_COUNTRY     29241\nAGENT_ATTORNEY_PROVINCE               AGENT_ATTORNEY_PROVINCE     89035\nAGENT_ATTORNEY_PHONE                     AGENT_ATTORNEY_PHONE     29241\nAGENT_ATTORNEY_PHONE_EXT             AGENT_ATTORNEY_PHONE_EXT     95508\nAGENT_ATTORNEY_EMAIL_ADDRESS     AGENT_ATTORNEY_EMAIL_ADDRESS     29241\nLAWFIRM_NAME_BUSINESS_NAME         LAWFIRM_NAME_BUSINESS_NAME     29241\nSTATE_OF_HIGHEST_COURT                 STATE_OF_HIGHEST_COURT     29449\nNAME_OF_HIGHEST_STATE_COURT       NAME_OF_HIGHEST_STATE_COURT     29449\nSECONDARY_ENTITY_BUSINESS_NAME SECONDARY_ENTITY_BUSINESS_NAME     76337\nWORKSITE_ADDRESS2                           WORKSITE_ADDRESS2     68895\nWORKSITE_COUNTY                               WORKSITE_COUNTY         2\nWAGE_RATE_OF_PAY_TO                       WAGE_RATE_OF_PAY_TO     68170\nPW_TRACKING_NUMBER                         PW_TRACKING_NUMBER     99550\nPW_WAGE_LEVEL                                   PW_WAGE_LEVEL      6795\nPW_OES_YEAR                                       PW_OES_YEAR      6795\nPW_OTHER_SOURCE                               PW_OTHER_SOURCE     93039\nPW_OTHER_YEAR                                   PW_OTHER_YEAR     93039\nPW_SURVEY_PUBLISHER                       PW_SURVEY_PUBLISHER     94116\nPW_SURVEY_NAME                                 PW_SURVEY_NAME     94116\nSTATUTORY_BASIS                               STATUTORY_BASIS     74054\nPREPARER_LAST_NAME                         PREPARER_LAST_NAME     49009\nPREPARER_FIRST_NAME                       PREPARER_FIRST_NAME     49009\nPREPARER_MIDDLE_INITIAL               PREPARER_MIDDLE_INITIAL     79657\nPREPARER_BUSINESS_NAME                 PREPARER_BUSINESS_NAME     49009\nPREPARER_EMAIL                                 PREPARER_EMAIL     49009\n\n\n\n\nCode\n# Replace PREVAILING_WAGE with your actual wage column name if different\n\nlca_wage &lt;- lca |&gt;\nfilter(!is.na(PREVAILING_WAGE),\nPREVAILING_WAGE &gt; 0,\n!is.na(CASE_STATUS),\nCASE_STATUS != \"\")\n\nggplot(lca_wage, aes(x = CASE_STATUS, y = PREVAILING_WAGE)) +\ngeom_boxplot() +\ncoord_flip() +\nlabs(\ntitle = \"Prevailing Wage by Case Status\",\nx = \"Case Status\",\ny = \"Prevailing Wage\"\n) +\ntheme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\n# Top 10 SOC titles overall\n\ntop10_soc &lt;- soc_freq |&gt;\nslice_max(n, n = 10) |&gt;\npull(SOC_TITLE)\n\nsoc_case &lt;- lca |&gt;\nfilter(SOC_TITLE %in% top10_soc,\n!is.na(CASE_STATUS),\nCASE_STATUS != \"\") |&gt;\ncount(SOC_TITLE, CASE_STATUS, name = \"n\")\n\nggplot(soc_case,\naes(x = reorder(SOC_TITLE, -n), y = n, fill = CASE_STATUS)) +\ngeom_col() +\ncoord_flip() +\nlabs(\ntitle = \"Case Status Distribution within Top 10 SOC Titles\",\nx = \"SOC Title\",\ny = \"Count\",\nfill = \"Case Status\"\n) +\ntheme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(lubridate)\n\n\n\nAttaching package: 'lubridate'\n\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n\n\nCode\n# üîÅ CHANGE `DECISION_DATE` to your actual date column name\nlca_monthly_status &lt;- lca |&gt;\n  mutate(\n    decision_date = as.Date(DECISION_DATE),      # &lt;-- change this\n    month = floor_date(decision_date, unit = \"month\")\n  ) |&gt;\n  filter(!is.na(month),\n         !is.na(CASE_STATUS),\n         CASE_STATUS != \"\") |&gt;\n  group_by(month, CASE_STATUS) |&gt;\n  summarise(n = n(), .groups = \"drop\")\n\nhead(lca_monthly_status)\n\n\n# A tibble: 6 √ó 3\n  month      CASE_STATUS               n\n  &lt;date&gt;     &lt;chr&gt;                 &lt;int&gt;\n1 2023-10-01 Certified             35433\n2 2023-10-01 Certified - Withdrawn  5141\n3 2023-10-01 Denied                  400\n4 2023-10-01 Withdrawn               638\n5 2023-11-01 Certified             27356\n6 2023-11-01 Certified - Withdrawn  2463",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>1. Filter only SOC = \"Software Developers\"</span>"
    ]
  }
]