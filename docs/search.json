[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "LCA-Work Visa Trends",
    "section": "",
    "text": "1 Introduction",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "LCA-Work Visa Trends",
    "section": "",
    "text": "#Data\n\n\nCode\nlibrary(readxl)\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(tidyr)\nlibrary(ggplot2)\n\nlca &lt;- read_excel(\"data/2024/FY2024_Q1.xlsx\")\n\ncols_to_check &lt;- c(\n  \"CASE_STATUS\", \"RECEIVED_DATE\", \"VISA_CLASS\", \"FULL_TIME_POSITION\",\n  \"TOTAL_WORKER_POSITIONS\", \"JOB_TITLE\",\n  \"SOC_CODE\", \"SOC_TITLE\",\n  \"EMPLOYER_NAME\", \"EMPLOYER_STATE\", \"EMPLOYER_CITY\",\n  \"NAICS_CODE\",\n  \"WORKSITE_CITY\", \"WORKSITE_STATE\",\n  \"WAGE_RATE_OF_PAY_FROM\", \"WAGE_RATE_OF_PAY_TO\", \"WAGE_UNIT_OF_PAY\",\n  \"PREVAILING_WAGE\", \"PW_UNIT_OF_PAY\", \"PW_WAGE_LEVEL\"\n)\n\nmissing_summary &lt;- lca |&gt;\n  select(all_of(cols_to_check)) |&gt;\n  summarise(across(everything(), ~ mean(is.na(.)))) |&gt;\n  pivot_longer(everything(),\n               names_to = \"variable\",\n               values_to = \"prop_missing\")\n\nggplot(missing_summary,\n       aes(x = reorder(variable, prop_missing),\n           y = prop_missing)) +\n  geom_col() +\n  coord_flip() +\n  scale_y_continuous(labels = scales::percent_format()) +\n  labs(\n    x = \"Variable\",\n    y = \"Percent missing\",\n    title = \"Missingness by variable (key columns)\"\n  )",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>data.html</span>"
    ]
  },
  {
    "objectID": "start.html",
    "href": "start.html",
    "title": "3  start",
    "section": "",
    "text": "Code\n# Load required libraries\nlibrary(readxl)\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(ggplot2)\n\noptions(warn = -1)\n\n# Helper function to read only CASE_STATUS column\nread_status_only &lt;- function(file_path, year) {\n  df &lt;- read_excel(file_path, col_types = \"text\")\n  # Keep only CASE_STATUS column and add YEAR\n  df &lt;- df %&gt;% \n    select(CASE_STATUS) %&gt;%\n    mutate(YEAR = year)\n  return(df)\n}\n\n# Read 2019 data\ncat(\"Loading 2019 data...\\n\")\n\n\nLoading 2019 data...\n\n\nCode\ndf_2019 &lt;- read_status_only(\"data/2019/FY2019.xlsx\", 2019)\n\n# Read 2020 data\ncat(\"Loading 2020 data...\\n\")\n\n\nLoading 2020 data...\n\n\nCode\ndf_2020_q1 &lt;- read_status_only(\"data/2020/FY2020_Q1.xlsx\", 2020)\ndf_2020_q2 &lt;- read_status_only(\"data/2020/FY2020_Q2.xlsx\", 2020)\ndf_2020_q3 &lt;- read_status_only(\"data/2020/FY2020_Q3.xlsx\", 2020)\ndf_2020_q4 &lt;- read_status_only(\"data/2020/FY2020_Q4.xlsx\", 2020)\ndf_2020 &lt;- bind_rows(df_2020_q1, df_2020_q2, df_2020_q3, df_2020_q4)\nrm(df_2020_q1, df_2020_q2, df_2020_q3, df_2020_q4)\ngc()\n\n\n          used (Mb) gc trigger   (Mb) limit (Mb)  max used   (Mb)\nNcells 1091348 58.3    3838572  205.1         NA   4798214  256.3\nVcells 6451610 49.3  196064593 1495.9      16384 290084870 2213.2\n\n\nCode\n# Read 2021 data\ncat(\"Loading 2021 data...\\n\")\n\n\nLoading 2021 data...\n\n\nCode\ndf_2021_q1 &lt;- read_status_only(\"data/2021/FY2021_Q1.xlsx\", 2021)\ndf_2021_q2 &lt;- read_status_only(\"data/2021/FY2021_Q2.xlsx\", 2021)\ndf_2021_q3 &lt;- read_status_only(\"data/2021/FY2021_Q3.xlsx\", 2021)\ndf_2021_q4 &lt;- read_status_only(\"data/2021/FY2021_Q4.xlsx\", 2021)\ndf_2021 &lt;- bind_rows(df_2021_q1, df_2021_q2, df_2021_q3, df_2021_q4)\nrm(df_2021_q1, df_2021_q2, df_2021_q3, df_2021_q4)\ngc()\n\n\n          used (Mb) gc trigger  (Mb) limit (Mb)  max used   (Mb)\nNcells 1091842 58.4    3838572 205.1         NA   4798214  256.3\nVcells 8105224 61.9  120503047 919.4      16384 290084870 2213.2\n\n\nCode\n# Read 2022 data\ncat(\"Loading 2022 data...\\n\")\n\n\nLoading 2022 data...\n\n\nCode\ndf_2022_q1 &lt;- read_status_only(\"data/2022/FY2022_Q1.xlsx\", 2022)\ndf_2022_q2 &lt;- read_status_only(\"data/2022/FY2022_Q2.xlsx\", 2022)\ndf_2022_q3 &lt;- read_status_only(\"data/2022/FY2022_Q3.xlsx\", 2022)\ndf_2022_q4 &lt;- read_status_only(\"data/2022/FY2022_Q4.xlsx\", 2022)\ndf_2022 &lt;- bind_rows(df_2022_q1, df_2022_q2, df_2022_q3, df_2022_q4)\nrm(df_2022_q1, df_2022_q2, df_2022_q3, df_2022_q4)\ngc()\n\n\n          used (Mb) gc trigger  (Mb) limit (Mb)  max used   (Mb)\nNcells 1091902 58.4    3838572 205.1         NA   4798214  256.3\nVcells 9357462 71.4   96402438 735.5      16384 290084870 2213.2\n\n\nCode\n# Read 2023 data\ncat(\"Loading 2023 data...\\n\")\n\n\nLoading 2023 data...\n\n\nCode\ndf_2023_q1 &lt;- read_status_only(\"data/2023/FY2023_Q1.xlsx\", 2023)\ndf_2023_q2 &lt;- read_status_only(\"data/2023/FY2023_Q2.xlsx\", 2023)\ndf_2023_q3 &lt;- read_status_only(\"data/2023/FY2023_Q3.xlsx\", 2023)\ndf_2023_q4 &lt;- read_status_only(\"data/2023/FY2023_Q4.xlsx\", 2023)\ndf_2023 &lt;- bind_rows(df_2023_q1, df_2023_q2, df_2023_q3, df_2023_q4)\nrm(df_2023_q1, df_2023_q2, df_2023_q3, df_2023_q4)\ngc()\n\n\n           used (Mb) gc trigger  (Mb) limit (Mb)  max used   (Mb)\nNcells  1091959 58.4    3838572 205.1         NA   4798214  256.3\nVcells 10646742 81.3  102815839 784.5      16384 290084870 2213.2\n\n\nCode\n# Read 2024 data\ncat(\"Loading 2024 data...\\n\")\n\n\nLoading 2024 data...\n\n\nCode\ndf_2024_q1 &lt;- read_status_only(\"data/2024/FY2024_Q1.xlsx\", 2024)\ndf_2024_q2 &lt;- read_status_only(\"data/2024/FY2024_Q2.xlsx\", 2024)\ndf_2024_q3 &lt;- read_status_only(\"data/2024/FY2024_Q3.xlsx\", 2024)\ndf_2024_q4 &lt;- read_status_only(\"data/2024/FY2024_Q4.xlsx\", 2024)\ndf_2024 &lt;- bind_rows(df_2024_q1, df_2024_q2, df_2024_q3, df_2024_q4)\nrm(df_2024_q1, df_2024_q2, df_2024_q3, df_2024_q4)\ngc()\n\n\n           used (Mb) gc trigger  (Mb) limit (Mb)  max used   (Mb)\nNcells  1092019 58.4    3838572 205.1         NA   4798214  256.3\nVcells 11768886 89.8   88970378 678.8      16384 290084870 2213.2\n\n\nCode\n# Combine all years\ncat(\"Combining all years...\\n\")\n\n\nCombining all years...\n\n\nCode\nall_data &lt;- bind_rows(df_2019, df_2020, df_2021, df_2022, df_2023, df_2024)\n\n# Clear individual year dataframes\nrm(df_2019, df_2020, df_2021, df_2022, df_2023, df_2024)\ngc()\n\n\n           used (Mb) gc trigger  (Mb) limit (Mb)  max used   (Mb)\nNcells  1092014 58.4    3838572 205.1         NA   4798214  256.3\nVcells 11768900 89.8   71176303 543.1      16384 290084870 2213.2\n\n\nCode\n# Check the data\ncat(\"\\nTotal records loaded:\", nrow(all_data), \"\\n\")\n\n\n\nTotal records loaded: 3899983 \n\n\nCode\ncat(\"Unique case statuses:\", unique(all_data$CASE_STATUS), \"\\n\")\n\n\nUnique case statuses: WITHDRAWN CERTIFIED-WITHDRAWN CERTIFIED DENIED Certified Certified - Withdrawn Denied Withdrawn \n\n\nCode\n# Categorize case status into Accepted/Rejected\nall_data &lt;- all_data %&gt;%\n  mutate(STATUS_CATEGORY = case_when(\n    CASE_STATUS %in% c(\"Certified\", \"Certified - Withdrawn\") ~ \"Accepted\",\n    CASE_STATUS %in% c(\"Denied\", \"Withdrawn\") ~ \"Rejected\",\n    TRUE ~ \"Other\"\n  ))\n\n# Create summary by year and status\nsummary_data &lt;- all_data %&gt;%\n  filter(STATUS_CATEGORY %in% c(\"Accepted\", \"Rejected\")) %&gt;%\n  group_by(YEAR, STATUS_CATEGORY) %&gt;%\n  summarise(COUNT = n(), .groups = \"drop\")\n\n\n\n\nCode\n# Categorize case status into Accepted/Rejected\nall_data &lt;- all_data %&gt;%\n  mutate(STATUS_CATEGORY = case_when(\n    CASE_STATUS %in% c(\"Certified\", \"Certified - Withdrawn\", \"CERTIFIED\", \"CERTIFIED-WITHDRAWN\") ~ \"Accepted\",\n    CASE_STATUS %in% c(\"Denied\", \"Withdrawn\", \"DENIED\", \"WITHDRAWN\") ~ \"Rejected\",\n    TRUE ~ \"Other\"\n  ))\n\n# Create summary by year and status\nsummary_data &lt;- all_data %&gt;%\n  filter(STATUS_CATEGORY %in% c(\"Accepted\", \"Rejected\")) %&gt;%\n  group_by(YEAR, STATUS_CATEGORY) %&gt;%\n  summarise(COUNT = n(), .groups = \"drop\")\n# Print summary\nprint(all_data)\n\n\n# A tibble: 3,899,983 × 3\n   CASE_STATUS  YEAR STATUS_CATEGORY\n   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;          \n 1 WITHDRAWN    2019 Rejected       \n 2 WITHDRAWN    2019 Rejected       \n 3 WITHDRAWN    2019 Rejected       \n 4 WITHDRAWN    2019 Rejected       \n 5 WITHDRAWN    2019 Rejected       \n 6 WITHDRAWN    2019 Rejected       \n 7 WITHDRAWN    2019 Rejected       \n 8 WITHDRAWN    2019 Rejected       \n 9 WITHDRAWN    2019 Rejected       \n10 WITHDRAWN    2019 Rejected       \n# ℹ 3,899,973 more rows\n\n\nCode\nprint(summary_data)\n\n\n# A tibble: 12 × 3\n    YEAR STATUS_CATEGORY  COUNT\n   &lt;dbl&gt; &lt;chr&gt;            &lt;int&gt;\n 1  2019 Accepted        639049\n 2  2019 Rejected         25567\n 3  2020 Accepted        562359\n 4  2020 Rejected         14975\n 5  2021 Accepted        805988\n 6  2021 Rejected         20317\n 7  2022 Accepted        611557\n 8  2022 Rejected         14527\n 9  2023 Accepted        630216\n10  2023 Rejected         14391\n11  2024 Accepted        547448\n12  2024 Rejected         13589\n\n\nCode\n# Create frequency histogram\nggplot(summary_data, aes(x = factor(YEAR), y = COUNT, fill = STATUS_CATEGORY)) +\n  geom_bar(stat = \"identity\", position = \"dodge\", width = 0.7) +\n  geom_text(aes(label = scales::comma(COUNT)), \n            position = position_dodge(width = 0.7), \n            vjust = -0.5, \n            size = 3.5) +\n  scale_fill_manual(values = c(\"Accepted\" = \"#2ecc71\", \"Rejected\" = \"#e74c3c\"),\n                    name = \"Status\") +\n  scale_y_continuous(labels = scales::comma, \n                     expand = expansion(mult = c(0, 0.1))) +\n  labs(title = \"H-1B Visa Filing Status by Year\",\n       subtitle = \"Frequency of Accepted vs Rejected Applications (FY 2019-2024)\",\n       x = \"Fiscal Year\",\n       y = \"Number of Applications\",\n       caption = \"Data Source: H-1B Disclosure Data\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 12, hjust = 0.5, color = \"gray40\"),\n    axis.title = element_text(size = 12, face = \"bold\"),\n    axis.text = element_text(size = 10),\n    legend.position = \"top\",\n    legend.title = element_text(face = \"bold\"),\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nCode\n# Optional: Save the plot\nggsave(\"h1b_visa_status_histogram.png\", width = 12, height = 7, dpi = 300)\n\n# Create additional percentage view\nsummary_data_pct &lt;- summary_data %&gt;%\n  group_by(YEAR) %&gt;%\n  mutate(PERCENTAGE = COUNT / sum(COUNT) * 100)\n\n# Print acceptance rates by year\nacceptance_rates &lt;- summary_data_pct %&gt;%\n  filter(STATUS_CATEGORY == \"Accepted\") %&gt;%\n  select(YEAR, PERCENTAGE) %&gt;%\n  mutate(PERCENTAGE = round(PERCENTAGE, 2))\n\ncat(\"\\nAcceptance Rates by Year:\\n\")\n\n\n\nAcceptance Rates by Year:\n\n\nCode\nprint(acceptance_rates)\n\n\n# A tibble: 6 × 2\n# Groups:   YEAR [6]\n   YEAR PERCENTAGE\n  &lt;dbl&gt;      &lt;dbl&gt;\n1  2019       96.2\n2  2020       97.4\n3  2021       97.5\n4  2022       97.7\n5  2023       97.8\n6  2024       97.6\n\n\nCode\n# Create stacked percentage bar chart\nggplot(summary_data_pct, aes(x = factor(YEAR), y = PERCENTAGE, fill = STATUS_CATEGORY)) +\n  geom_bar(stat = \"identity\", width = 0.7) +\n  geom_text(aes(label = paste0(round(PERCENTAGE, 1), \"%\")), \n            position = position_stack(vjust = 0.5), \n            size = 4, \n            color = \"white\",\n            fontface = \"bold\") +\n  scale_fill_manual(values = c(\"Accepted\" = \"#2ecc71\", \"Rejected\" = \"#e74c3c\"),\n                    name = \"Status\") +\n  labs(title = \"H-1B Visa Acceptance Rate by Year\",\n       subtitle = \"Percentage Distribution (FY 2019-2024)\",\n       x = \"Fiscal Year\",\n       y = \"Percentage (%)\",\n       caption = \"Data Source: H-1B Disclosure Data\") +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0.5),\n    plot.subtitle = element_text(size = 12, hjust = 0.5, color = \"gray40\"),\n    axis.title = element_text(size = 12, face = \"bold\"),\n    axis.text = element_text(size = 10),\n    legend.position = \"top\",\n    legend.title = element_text(face = \"bold\"),\n    panel.grid.minor = element_blank(),\n    panel.grid.major.x = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nCode\n# Save percentage plot\nggsave(\"h1b_visa_acceptance_rate.png\", width = 12, height = 7, dpi = 300)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>start</span>"
    ]
  },
  {
    "objectID": "freq_plot.html",
    "href": "freq_plot.html",
    "title": "4  Freq Plot",
    "section": "",
    "text": "Code\n# Data\nlibrary(readxl)\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(ggplot2)\nlibrary(maps)\n\n\n\n\nCode\n#reading the data\nlca &lt;- read_excel(\"data/2024/FY2024_Q1.xlsx\")\n\nnames(lca)\n\n\n [1] \"CASE_NUMBER\"                    \"CASE_STATUS\"                   \n [3] \"RECEIVED_DATE\"                  \"DECISION_DATE\"                 \n [5] \"ORIGINAL_CERT_DATE\"             \"VISA_CLASS\"                    \n [7] \"JOB_TITLE\"                      \"SOC_CODE\"                      \n [9] \"SOC_TITLE\"                      \"FULL_TIME_POSITION\"            \n[11] \"BEGIN_DATE\"                     \"END_DATE\"                      \n[13] \"TOTAL_WORKER_POSITIONS\"         \"NEW_EMPLOYMENT\"                \n[15] \"CONTINUED_EMPLOYMENT\"           \"CHANGE_PREVIOUS_EMPLOYMENT\"    \n[17] \"NEW_CONCURRENT_EMPLOYMENT\"      \"CHANGE_EMPLOYER\"               \n[19] \"AMENDED_PETITION\"               \"EMPLOYER_NAME\"                 \n[21] \"TRADE_NAME_DBA\"                 \"EMPLOYER_ADDRESS1\"             \n[23] \"EMPLOYER_ADDRESS2\"              \"EMPLOYER_CITY\"                 \n[25] \"EMPLOYER_STATE\"                 \"EMPLOYER_POSTAL_CODE\"          \n[27] \"EMPLOYER_COUNTRY\"               \"EMPLOYER_PROVINCE\"             \n[29] \"EMPLOYER_PHONE\"                 \"EMPLOYER_PHONE_EXT\"            \n[31] \"EMPLOYER_FEIN\"                  \"NAICS_CODE\"                    \n[33] \"EMPLOYER_POC_LAST_NAME\"         \"EMPLOYER_POC_FIRST_NAME\"       \n[35] \"EMPLOYER_POC_MIDDLE_NAME\"       \"EMPLOYER_POC_JOB_TITLE\"        \n[37] \"EMPLOYER_POC_ADDRESS1\"          \"EMPLOYER_POC_ADDRESS2\"         \n[39] \"EMPLOYER_POC_CITY\"              \"EMPLOYER_POC_STATE\"            \n[41] \"EMPLOYER_POC_POSTAL_CODE\"       \"EMPLOYER_POC_COUNTRY\"          \n[43] \"EMPLOYER_POC_PROVINCE\"          \"EMPLOYER_POC_PHONE\"            \n[45] \"EMPLOYER_POC_PHONE_EXT\"         \"EMPLOYER_POC_EMAIL\"            \n[47] \"AGENT_REPRESENTING_EMPLOYER\"    \"AGENT_ATTORNEY_LAST_NAME\"      \n[49] \"AGENT_ATTORNEY_FIRST_NAME\"      \"AGENT_ATTORNEY_MIDDLE_NAME\"    \n[51] \"AGENT_ATTORNEY_ADDRESS1\"        \"AGENT_ATTORNEY_ADDRESS2\"       \n[53] \"AGENT_ATTORNEY_CITY\"            \"AGENT_ATTORNEY_STATE\"          \n[55] \"AGENT_ATTORNEY_POSTAL_CODE\"     \"AGENT_ATTORNEY_COUNTRY\"        \n[57] \"AGENT_ATTORNEY_PROVINCE\"        \"AGENT_ATTORNEY_PHONE\"          \n[59] \"AGENT_ATTORNEY_PHONE_EXT\"       \"AGENT_ATTORNEY_EMAIL_ADDRESS\"  \n[61] \"LAWFIRM_NAME_BUSINESS_NAME\"     \"STATE_OF_HIGHEST_COURT\"        \n[63] \"NAME_OF_HIGHEST_STATE_COURT\"    \"WORKSITE_WORKERS\"              \n[65] \"SECONDARY_ENTITY\"               \"SECONDARY_ENTITY_BUSINESS_NAME\"\n[67] \"WORKSITE_ADDRESS1\"              \"WORKSITE_ADDRESS2\"             \n[69] \"WORKSITE_CITY\"                  \"WORKSITE_COUNTY\"               \n[71] \"WORKSITE_STATE\"                 \"WORKSITE_POSTAL_CODE\"          \n[73] \"WAGE_RATE_OF_PAY_FROM\"          \"WAGE_RATE_OF_PAY_TO\"           \n[75] \"WAGE_UNIT_OF_PAY\"               \"PREVAILING_WAGE\"               \n[77] \"PW_UNIT_OF_PAY\"                 \"PW_TRACKING_NUMBER\"            \n[79] \"PW_WAGE_LEVEL\"                  \"PW_OES_YEAR\"                   \n[81] \"PW_OTHER_SOURCE\"                \"PW_OTHER_YEAR\"                 \n[83] \"PW_SURVEY_PUBLISHER\"            \"PW_SURVEY_NAME\"                \n[85] \"TOTAL_WORKSITE_LOCATIONS\"       \"AGREE_TO_LC_STATEMENT\"         \n[87] \"H_1B_DEPENDENT\"                 \"WILLFUL_VIOLATOR\"              \n[89] \"SUPPORT_H1B\"                    \"STATUTORY_BASIS\"               \n[91] \"APPENDIX_A_ATTACHED\"            \"PUBLIC_DISCLOSURE\"             \n[93] \"PREPARER_LAST_NAME\"             \"PREPARER_FIRST_NAME\"           \n[95] \"PREPARER_MIDDLE_INITIAL\"        \"PREPARER_BUSINESS_NAME\"        \n[97] \"PREPARER_EMAIL\"                \n\n\n\n\nCode\n#Frequency of SOCs\nsoc_freq &lt;- lca %&gt;%\n  filter(!is.na(SOC_TITLE), SOC_TITLE != \"\") %&gt;%\n  count(SOC_TITLE, sort = TRUE)\n\nhead(soc_freq)\n\n\n# A tibble: 6 × 2\n  SOC_TITLE                                           n\n  &lt;chr&gt;                                           &lt;int&gt;\n1 Software Developers                             32756\n2 Computer Systems Engineers/Architects            5562\n3 Information Technology Project Managers          3706\n4 Computer Systems Analysts                        3360\n5 Software Quality Assurance Analysts and Testers  3135\n6 Computer and Information Systems Managers        2531\n\n\n\n\nCode\n#SOC vs Freq\nsoc_freq|&gt;\n  slice_max(n, n = 20) |&gt;\n  ggplot(aes(x = reorder(SOC_TITLE, n), y = n)) +\n  geom_col() +\n  coord_flip() +\n  labs(\n    title = \"Frequency of SOC in LCA Data\",\n    x = \"SOC\",\n    y = \"Count\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\n# 1. Filter only SOC = \"Software Developers\"\nsoftware_dev &lt;- lca %&gt;%\n  filter(SOC_TITLE == \"Software Developers\")\n\n# 2. Get frequency of job titles within this SOC\njob_freq &lt;- software_dev %&gt;%\n  filter(!is.na(JOB_TITLE), JOB_TITLE != \"\") %&gt;%\n  count(JOB_TITLE, sort = TRUE)\n\n# Optional: peek at top titles\nhead(job_freq, 10)\n\n\n# A tibble: 10 × 2\n   JOB_TITLE                            n\n   &lt;chr&gt;                            &lt;int&gt;\n 1 Software Engineer                 4750\n 2 Software Developer                3620\n 3 Senior Software Engineer          1273\n 4 SOFTWARE DEVELOPER                1025\n 5 Software Development Engineer II   666\n 6 SOFTWARE ENGINEER                  598\n 7 Staff Software Engineer            292\n 8 Senior Software Developer          279\n 9 Software Development Engineer      251\n10 Java Developer                     237\n\n\nCode\n# 3. Bar chart of top 20 job titles in Software Developers SOC\njob_freq |&gt;\n  slice_max(n, n = 20) |&gt;   \n  ggplot(aes(x = reorder(JOB_TITLE, n), y = n)) +\n  geom_col() +\n  coord_flip() +\n  labs(\n    title = \"Top Job Titles within SOC: Software Developers\",\n    x = \"Job Title\",\n    y = \"Count\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\n\n\n\n\nCode\n# Unique SOC code–title combinations\nsoc_table &lt;- lca |&gt;\n  select(SOC_CODE, SOC_TITLE) |&gt;\n  distinct() |&gt;\n  arrange(SOC_CODE)\n\n# View in console\nsoc_table\n\n\n# A tibble: 794 × 2\n   SOC_CODE   SOC_TITLE                          \n   &lt;chr&gt;      &lt;chr&gt;                              \n 1 11-1011    Chief Executives                   \n 2 11-1011.00 Chief Executives                   \n 3 11-1011.03 Chief Sustainability Officers      \n 4 11-1021    General and Operations Managers    \n 5 11-1021.00 General and Operations Managers    \n 6 11-2011.00 Advertising and Promotions Managers\n 7 11-2021    Marketing Managers                 \n 8 11-2021    MARKETING MANAGERS                 \n 9 11-2021    Marketing Manager                  \n10 11-2021.00 Marketing Managers                 \n# ℹ 784 more rows\n\n\n\n\nCode\n#State vs SOC\nstate_counts &lt;- lca |&gt;\n  filter(CASE_STATUS == \"Certified\",\n         !is.na(WORKSITE_STATE),\n         WORKSITE_STATE != \"\") |&gt;\n  count(WORKSITE_STATE, name = \"n\")\n\nhead(state_counts)\n\n\n# A tibble: 6 × 2\n  WORKSITE_STATE     n\n  &lt;chr&gt;          &lt;int&gt;\n1 AK               100\n2 AL               221\n3 AR               431\n4 AZ              1486\n5 CA             15832\n6 CO               923\n\n\n\n\nCode\n# Lookup table: 2-letter abbrev -&gt; full state name (lowercase for map_data)\nstate_lookup &lt;- data.frame(\n  WORKSITE_STATE = state.abb,\n  region = tolower(state.name),\n  stringsAsFactors = FALSE\n)\n\nstate_counts_map &lt;- state_counts |&gt;\n  inner_join(state_lookup, by = \"WORKSITE_STATE\")\n\nusa_map &lt;- map_data(\"state\")\n\nplot_data &lt;- usa_map |&gt;\n  left_join(state_counts_map, by = \"region\")\n  \n\n\nstate_labels &lt;- plot_data|&gt;\n  group_by(region) |&gt;\n  summarise(\n    long = mean(range(long)),  \n    lat  = mean(range(lat))\n  ) |&gt;\n  left_join(state_lookup, by = \"region\")   \n  \n\n\n#Choropleth  \nggplot() +\n \n  geom_polygon(\n    data = plot_data,\n    aes(x = long, y = lat, group = group, fill = n),\n    color = \"white\",\n    linewidth = 0.2\n  ) +\n  \n  geom_text(\n    data = state_labels,\n    aes(x = long, y = lat, label = WORKSITE_STATE),\n    color = \"white\",\n    size  = 2\n  ) +\n  coord_fixed(1.3) +\n  labs(\n    title = \"Number of Certified LCA Cases by State\",\n    fill  = \"Visa Count\",\n    x = NULL,\n    y = NULL\n  ) +\n   scale_fill_gradient(\n    low  = \"#c6e5ff\",   \n    high = \"#003366\",   \n    trans = \"sqrt\"      \n  ) +\n  theme_minimal() +\n  theme(\n    axis.text  = element_blank(),\n    axis.ticks = element_blank()\n  )\n\n\nWarning: Removed 1 row containing missing values or values outside the scale range\n(`geom_text()`).",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Freq Plot</span>"
    ]
  },
  {
    "objectID": "box_plot.html",
    "href": "box_plot.html",
    "title": "5  Box Plot",
    "section": "",
    "text": "Code\nlibrary(readxl)\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(ggplot2)\n\n# Read data\nlca &lt;- read_excel(\"data/2024/FY2024_Q1.xlsx\")\n\n# Keep only rows with needed fields\n# (add CASE_STATUS filter here if you want, e.g. CASE_STATUS == \"CERTIFIED\")\nlca_clean &lt;- lca |&gt;\n  filter(\n    !is.na(SOC_TITLE),\n    !is.na(WAGE_RATE_OF_PAY_FROM),\n    !is.na(PW_UNIT_OF_PAY)\n  )\n\n# Quick sanity check\nnrow(lca_clean)   # should be &gt; 0\n\n\n[1] 99692\n\n\nCode\n# Top 20 SOC titles in this cleaned data\ntop_20_soc_titles &lt;- lca_clean |&gt;\n  count(SOC_TITLE, sort = TRUE) |&gt;\n  slice_head(n = 20) |&gt;\n  pull(SOC_TITLE)\n\n# Boxplot for top 20 SOC titles, faceted by pay unit\nlca_clean |&gt;\n  filter(SOC_TITLE %in% top_20_soc_titles) |&gt;\n  group_by(SOC_TITLE, PW_UNIT_OF_PAY) |&gt;\n  filter(n() &gt;= 50) |&gt;\n  ungroup() |&gt;\n  ggplot(aes(\n    x = reorder(SOC_TITLE, WAGE_RATE_OF_PAY_FROM, FUN = median),\n    y = WAGE_RATE_OF_PAY_FROM\n  )) +\n  geom_boxplot() +\n  coord_flip() +\n  facet_wrap(~ PW_UNIT_OF_PAY) +\n  labs(\n    x = \"SOC title\",\n    y = \"Wage rate of pay (FROM)\",\n    title = \"Wage distribution by SOC (Top 20, faceted by pay unit)\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nCode\nlca_clean |&gt;\n  filter(SOC_TITLE %in% top_20_soc_titles) |&gt;\n  count(PW_UNIT_OF_PAY)\n\n\n# A tibble: 5 × 2\n  PW_UNIT_OF_PAY     n\n  &lt;chr&gt;          &lt;int&gt;\n1 Bi-Weekly          3\n2 Hour            3093\n3 Month             19\n4 Week               2\n5 Year           68470",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Box Plot</span>"
    ]
  }
]